"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[331],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>h});var o=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=o.createContext({}),u=function(e){var t=o.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=u(e.components);return o.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var r=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(r),m=n,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return r?o.createElement(h,i(i({ref:t},c),{},{components:r})):o.createElement(h,i({ref:t},c))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=r.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:n,i[1]=l;for(var u=2;u<a;u++)i[u]=r[u];return o.createElement.apply(null,i)}return o.createElement.apply(null,r)}m.displayName="MDXCreateElement"},24948:(e,t,r)=>{r.r(t),r.d(t,{contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var o=r(87462),n=(r(67294),r(3905));const a={},i="DocumentService - A powerful, schematised Roblox datastore library",l={type:"mdx",permalink:"/DocumentService/",source:"@site/pages/index.md",title:"DocumentService - A powerful, schematised Roblox datastore library",description:"DocumentService is a strictly typed Luau library for saving data with Roblox DataStores.",frontMatter:{}},s=[{value:"Features",id:"features",level:2},{value:"Ready for production",id:"ready-for-production",level:2},{value:"Installation",id:"installation",level:2},{value:"Method 1: Wally",id:"method-1-wally",level:3},{value:"Method 2: Manual",id:"method-2-manual",level:3},{value:"Long-term goals",id:"long-term-goals",level:2},{value:"Inspiration",id:"inspiration",level:2},{value:"Contributing",id:"contributing",level:2},{value:"Contact",id:"contact",level:2}],u={toc:s},c="wrapper";function p(e){let{components:t,...r}=e;return(0,n.kt)(c,(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"documentservice---a-powerful-schematised-roblox-datastore-library"},"DocumentService - A powerful, schematised Roblox datastore library"),(0,n.kt)("p",null,"DocumentService is a strictly typed Luau library for saving data with Roblox DataStores.\nIt can be used for sesssion-locked data, such as player data, or for non-session-locked data, like\nshared groups or houses."),(0,n.kt)("p",null,"See the ",(0,n.kt)("a",{parentName:"p",href:"https://anthony0br.github.io/DocumentService/docs/intro"},"docs")," for more information."),(0,n.kt)("h2",{id:"features"},"Features"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Fully typed API. This means you get full intellisense and typechecking on your data,\nand on every API method, including possible errors for each method."),(0,n.kt)("li",{parentName:"ul"},"Superior Rust-inspired error handling (Result types)."),(0,n.kt)("li",{parentName:"ul"},"Immutable cache - preventing bugs caused by updates interfering with eachother."),(0,n.kt)("li",{parentName:"ul"},"Does auto-saves and BindToClose saves for you."),(0,n.kt)("li",{parentName:"ul"},"Migrations, inspired by nezuo's Lapis."),(0,n.kt)("li",{parentName:"ul"},"Validate your data with support for runtime and static typechecking."),(0,n.kt)("li",{parentName:"ul"},"Documents can be session-locked, or not (to allow multi-server editing)."),(0,n.kt)("li",{parentName:"ul"},"Signals & hooks to 'tap in' to when operations start & finish."),(0,n.kt)("li",{parentName:"ul"},"Automatic retries with exponential backoff."),(0,n.kt)("li",{parentName:"ul"},"Migrate from no library, or another library if you're brave."),(0,n.kt)("li",{parentName:"ul"},"Checks your data can be stored in JSON to avoid silent errors."),(0,n.kt)("li",{parentName:"ul"},"Supports DataStore dependency injection - use any Mock DataStore you like."),(0,n.kt)("li",{parentName:"ul"},'Internally, completely strictly typed (Luau "--!strict" mode), and high\ncode quality standards with high test coverage.')),(0,n.kt)("h2",{id:"ready-for-production"},"Ready for production"),(0,n.kt)("p",null,"DocumentService is currently used in production in ",(0,n.kt)("a",{parentName:"p",href:"https://www.roblox.com/games/8265622251/V1-3-2-Croydon-The-London-Transport-Game"},"Croydon: The London Transport Game"),". It powers both player data and the custom companies feature\n(these are complex shared social groups). In its first few hours it flawlessly handled over 300,000 data updates and performed tens of thousands of migrations, migrating from no library (the game originally used a different, fragile system)."),(0,n.kt)("h2",{id:"installation"},"Installation"),(0,n.kt)("h3",{id:"method-1-wally"},"Method 1: Wally"),(0,n.kt)("p",null,"Add ",(0,n.kt)("inlineCode",{parentName:"p"},'DocumentService = "anthony0br/documentservice@LATEST_VERSION"')," to your ",(0,n.kt)("inlineCode",{parentName:"p"},"wally.toml"),"."),(0,n.kt)("h3",{id:"method-2-manual"},"Method 2: Manual"),(0,n.kt)("p",null,"DocumentService has no dependencies so you can just copy and paste the contents of\n",(0,n.kt)("inlineCode",{parentName:"p"},"target/roblox")," into your project."),(0,n.kt)("h2",{id:"long-term-goals"},"Long-term goals"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ACID transactions involving multiple Documents. Please get in touch if you can help with this!"),(0,n.kt)("li",{parentName:"ul"},"See the ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/anthony0br/DocumentService/issues"},"issues")," page to discuss ways to make DocumentService better!")),(0,n.kt)("h2",{id:"inspiration"},"Inspiration"),(0,n.kt)("p",null,"This library takes inspiration from Lapis, ProfileService, keyForm, and kampfkarren's blog.\nThese are all great projects but didn't meet my needs in some way."),(0,n.kt)("h2",{id:"contributing"},"Contributing"),(0,n.kt)("p",null,"Contributions are accepted. Please follow the Roblox Lua Style Guide and write unit tests."),(0,n.kt)("p",null,"To build for Roblox (this process is automated through a GitHub action, but in case you need it):"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install necessary tools (see rokit.toml)."),(0,n.kt)("li",{parentName:"ol"},"Run ",(0,n.kt)("inlineCode",{parentName:"li"},"rojo sourcemap source.project.json -o sourcemap.json"),". It is necessary to generate a sourcemap of the src folder so darklua can convert our requires."),(0,n.kt)("li",{parentName:"ol"},"Run ",(0,n.kt)("inlineCode",{parentName:"li"},"darklua process src target/roblox"),".")),(0,n.kt)("h2",{id:"contact"},"Contact"),(0,n.kt)("p",null,"Most discussions relating to this project happen on the ",(0,n.kt)("a",{parentName:"p",href:"https://discord.gg/rhwQFJksJD"},"Roblox OSS Discord Server")," (go to the DocumentService thread under projects)."))}p.isMDXComponent=!0}}]);